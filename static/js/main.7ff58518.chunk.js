(this["webpackJsonpreact-autocomplete-textarea"]=this["webpackJsonpreact-autocomplete-textarea"]||[]).push([[0],{19:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),i=n(5),s=n.n(i),o=(n(19),n(13)),l=n(14),c=n(4),u=n(6),h=n(7),p=n(2),g=n(9),f=n(8),d=n(0),b=n.n(d),v=n(12),m=n.n(v),O=n(11),j=n.n(O),y=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).el=document.createElement("div"),a.el.style.display="contents",a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el),this.renders()}},{key:"componentDidUpdate",value:function(){this.renders()}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"renders",value:function(){var e=this.props.children;s.a.render(e,this.el)}},{key:"render",value:function(){return null}}]),n}(r.a.Component),S=(n(22),n(1)),C=["Component","defaultValue","disabled","onBlur","value"],x={Component:b.a.oneOfType([b.a.string,b.a.elementType]),defaultValue:b.a.string,disabled:b.a.bool,maxOptions:b.a.number,onBlur:b.a.func,onChange:b.a.func,onKeyDown:b.a.func,onRequestOptions:b.a.func,onSelect:b.a.func,changeOnSelect:b.a.func,options:b.a.oneOfType([b.a.object,b.a.arrayOf(b.a.string)]),regex:b.a.string,matchAny:b.a.bool,minChars:b.a.number,requestOnlyIfNoOptions:b.a.bool,spaceRemovers:b.a.arrayOf(b.a.string),spacer:b.a.string,trigger:b.a.oneOfType([b.a.string,b.a.arrayOf(b.a.string)]),value:b.a.string,offsetX:b.a.number,offsetY:b.a.number,passThroughEnter:b.a.bool},k=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).arrayTriggerMatch=function(e,t){return e.map((function(e){return{triggerStr:e,triggerMatch:e.match(t),triggerLength:e.length}}))},r.isTrigger=function(e,t,n){return!e||!e.length||t.substr(n,e.length)===e},r.getMatch=r.getMatch.bind(Object(p.a)(r)),r.handleChange=r.handleChange.bind(Object(p.a)(r)),r.handleKeyDown=r.handleKeyDown.bind(Object(p.a)(r)),r.handleResize=r.handleResize.bind(Object(p.a)(r)),r.handleSelection=r.handleSelection.bind(Object(p.a)(r)),r.updateCaretPosition=r.updateCaretPosition.bind(Object(p.a)(r)),r.updateHelper=r.updateHelper.bind(Object(p.a)(r)),r.resetHelper=r.resetHelper.bind(Object(p.a)(r)),r.renderAutocompleteList=r.renderAutocompleteList.bind(Object(p.a)(r)),r.state={helperVisible:!1,left:0,trigger:null,matchLength:0,matchStart:0,options:[],selection:0,top:0,value:null},r.recentValue=e.defaultValue,r.enableSpaceRemovers=!1,r.refInput=Object(a.createRef)(),r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props.options,n=this.state.caret;t.length!==e.options.length&&this.updateHelper(this.recentValue,n,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getMatch",value:function(e,t,n){var a=this.props,r=a.trigger,i=a.matchAny,s=a.regex,o=new RegExp(s),l=r;Array.isArray(l)||(l=new Array(r)),l.sort();var u=n;Array.isArray(n)&&l.forEach((function(e){u[e]=n}));for(var h=this.arrayTriggerMatch(l,o),p=null,g=0;g<h.length;g+=1)for(var f=h[g],d=f.triggerStr,b=f.triggerMatch,v=f.triggerLength,m=t-1;m>=0;m-=1){var O=e.substring(m,t).match(o),j=-1;if(v>0){var y=b?m:m-v+1;if(y<0)break;if(this.isTrigger(d,e,y)&&(j=y+v),!O&&j<0)break}else{if(O&&m>0)continue;if(t-(j=0===m&&O?0:m+1)===0)break}if(j>=0)if("continue"===function(){var n=u[d];if(null==n)return"continue";var a=e.substring(j,t),r=n.filter((function(e){var t=e.toLowerCase().indexOf(a.toLowerCase());return-1!==t&&(i||0===t)})),s=d,o=a.length;p=null===p?{trigger:s,matchStart:j,matchLength:o,options:r}:Object(c.a)(Object(c.a)({},p),{},{trigger:s,matchStart:j,matchLength:o,options:r})}())continue}return p}},{key:"handleChange",value:function(e){var t=this.props,n=t.onChange,a=t.options,r=t.spaceRemovers,i=t.spacer,s=t.value,o=this.recentValue,l=e.target.value,c=j()(e.target).end;if(l.length||this.setState({helperVisible:!1}),this.recentValue=l,this.setState({caret:c,value:e.target.value}),!l.length||!c)return n(e.target.value);if(this.enableSpaceRemovers&&r.length&&l.length>2&&i.length){for(var u=0;u<Math.max(o.length,l.length);u+=1)if(o[u]!==l[u]){if(u>=2&&l[u-1]===i&&-1===r.indexOf(l[u-2])&&-1!==r.indexOf(l[u])&&this.getMatch(l.substring(0,u-2),c-3,a)){var h="".concat(l.slice(0,u-1)).concat(l.slice(u,u+1)).concat(l.slice(u-1,u)).concat(l.slice(u+1));return this.updateCaretPosition(u+1),this.refInput.current.value=h,s||this.setState({value:h}),n(h)}break}this.enableSpaceRemovers=!1}return this.updateHelper(l,c,a),s||this.setState({value:e.target.value}),n(e.target.value)}},{key:"handleKeyDown",value:function(e){var t=this.state,n=t.helperVisible,a=t.options,r=t.selection,i=this.props,s=i.onKeyDown,o=i.passThroughEnter,l=i.maxOptions,c=Math.min(l,a.length);if(n)switch(e.keyCode){case 27:e.preventDefault(),this.resetHelper();break;case 38:e.preventDefault(),this.setState({selection:(c+r-1)%c});break;case 40:e.preventDefault(),this.setState({selection:(r+1)%c});break;case 14:case 13:o||e.preventDefault(),this.handleSelection(r);break;case 9:this.handleSelection(r);break;default:s(e)}else s(e)}},{key:"handleResize",value:function(){this.setState({helperVisible:!1})}},{key:"handleSelection",value:function(e){var t=this.props,n=t.spacer,a=t.onSelect,r=t.changeOnSelect,i=this.state,s=i.matchStart,o=i.matchLength,l=i.options,c=i.trigger,u=l[e],h=this.recentValue,p=h.substring(0,s-c.length),g=h.substring(s+o),f={target:this.refInput.current},d=r(c,u);f.target.value="".concat(p).concat(d).concat(n).concat(g),this.handleChange(f),a(f.target.value),this.resetHelper(),this.updateCaretPosition(p.length+d.length+1),this.enableSpaceRemovers=!0}},{key:"updateCaretPosition",value:function(e){var t=this;this.setState({caret:e},(function(){return Object(O.setCaretPosition)(t.refInput.current,e)}))}},{key:"updateHelper",value:function(e,t,n){var a=this.refInput.current,r=this.getMatch(e,t,n);if(r){var i=m()(a,t-1),s=a.getBoundingClientRect(),o=s.top+i.top+window.scrollY-a.scrollTop,l=s.left+i.left,u=this.props,h=u.minChars,p=u.onRequestOptions,g=u.requestOnlyIfNoOptions;r.matchLength>=h&&(r.options.length>1||1===r.options.length&&r.options[0].length!==r.matchLength)?this.setState(Object(c.a)({helperVisible:!0,top:o,left:l},r)):(g&&r.options.length||p(e.substr(r.matchStart,r.matchLength)),this.resetHelper())}else this.resetHelper()}},{key:"resetHelper",value:function(){this.setState({helperVisible:!1,selection:0})}},{key:"renderAutocompleteList",value:function(){var e=this,t=this.state,n=t.helperVisible,a=t.left,r=t.matchStart,i=t.matchLength,s=t.options,o=t.selection,l=t.top,c=t.value;if(!n)return null;var u=this.props,h=u.maxOptions,p=u.offsetX,g=u.offsetY;if(0===s.length)return null;if(o>=s.length)return this.setState({selection:0}),null;var f=0===h?s.length:h,d=s.slice(0,f).map((function(t,n){var a=t.toLowerCase().indexOf(c.substr(r,i).toLowerCase());return Object(S.jsxs)("li",{className:n===o?"react-autocomplete-input-li-active":null,onClick:function(){e.handleSelection(n)},onMouseEnter:function(){e.setState({selection:n})},children:[t.slice(0,a),Object(S.jsx)("strong",{children:t.substr(a,i)}),t.slice(a+i)]},t)}));return Object(S.jsxs)(y,{children:[Object(S.jsx)("ul",{className:"react-autocomplete-input",style:{left:a+p,top:l+g},children:d}),Object(S.jsx)("div",{className:"react-autocomplete-backdrop",onClick:this.handleResize})]})}},{key:"render",value:function(){var e=this.props,t=e.Component,n=e.defaultValue,a=e.disabled,r=e.onBlur,i=e.value,s=Object(l.a)(e,C),o=this.state.value,u=Object.assign({},s);Object.keys(x).forEach((function(e){delete u[e]}));var h="";return"undefined"!==typeof i&&null!==i?h=i:o?h=o:n&&(h=n),Object(S.jsxs)("span",{children:[Object(S.jsx)(t,Object(c.a)(Object(c.a)({disabled:a,onBlur:r,onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:this.refInput,value:h},u),{},{className:"react-autocomplete-textArea"})),this.renderAutocompleteList()]})}}]),n}(r.a.Component);k.defaultProps={Component:"textarea",defaultValue:"",disabled:!1,maxOptions:6,onBlur:function(){},onChange:function(){},onKeyDown:function(){},onRequestOptions:function(){},onSelect:function(){},changeOnSelect:function(e,t){return e+t},options:[],regex:"^[A-Za-z0-9\\-_]+$",matchAny:!1,minChars:0,requestOnlyIfNoOptions:!0,spaceRemovers:[",",".","!","?"],spacer:" ",trigger:"@",offsetX:0,offsetY:0,value:null,passThroughEnter:!1};var w=k;n(24);var L=function(){var e=r.a.useState(""),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)("header",{className:"App-header",children:[Object(S.jsx)("p",{children:"react-autocomplete-textarea demo"}),Object(S.jsxs)("div",{style:{width:360},children:[Object(S.jsx)("span",{children:"Usage Example"}),Object(S.jsx)(w,{placeholder:"try input @",trigger:"@",offsetX:8,options:["apple","apricot","banana","carrot"],rows:"4",value:n,onChange:a}),Object(S.jsx)("span",{children:"Multiple Triggers and Options Example"}),Object(S.jsx)(w,{placeholder:"try input @ or @@",trigger:["@","@@"],options:{"@":["aa","ab","abc","abcd"],"@@":["az","ar"]}})]})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(L,{})}),document.getElementById("root")),R()}},[[25,1,2]]]);
//# sourceMappingURL=main.7ff58518.chunk.js.map